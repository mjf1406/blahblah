import{c as z,r as s,j as o,e as $,i as kr,d as S,h as Lt,B as U,l as Ce,g as Dr,m as Ft,R as Ar,n as Or}from"./index-DuR0837i.js";import{e as ee,f as ge,u as de,P as O,h as M,t as te,i as $t,m as zt,o as Gr,p as Lr,C as Bt,s as Fr,X as $r,q as Vt,r as Kt,O as Ut,I as Ie,j as st,D as Ht,a as zr,b as qt,c as Yt,d as Xt,v as Wt,L as F,w as Zt,k as Br,x as Vr,l as Kr,R as Ur,F as Hr,y as qr}from"./label-C1vPNv8q.js";import{c as ke,R as Jt,A as Qt,C as en,g as Yr,e as tn,a as it,u as je,b as nn,h as on,d as rn,f as Xr}from"./index-CcVNOCKz.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Zr=z("chevron-left",Wr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],an=z("chevron-right",Jr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xe=z("circle-question-mark",Qr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sn=z("circle",ea);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],na=z("dices",ta);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ra=z("file-json",oa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],sa=z("grid-2x2",aa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19 3 3v-5.5",key:"9ldu5r"}],["path",{d:"m17 22 3-3",key:"1nkfve"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],ca=z("image-down",ia);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],da=z("monitor",la);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],fa=z("mouse-pointer-2",ua);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],ma=z("move",pa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],xa=z("panel-left",ha);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],va=z("rotate-ccw",ga);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],wa=z("zoom-in",ba);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ca=z("zoom-out",ya);var[De,il]=ee("Tooltip",[ke]),Ae=ke(),cn="TooltipProvider",ja=700,We="tooltip.open",[Ma,ct]=De(cn),ln=e=>{const{__scopeTooltip:n,delayDuration:t=ja,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,c=s.useRef(!0),l=s.useRef(!1),p=s.useRef(0);return s.useEffect(()=>{const d=p.current;return()=>window.clearTimeout(d)},[]),o.jsx(Ma,{scope:n,isOpenDelayedRef:c,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(p.current),c.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:s.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};ln.displayName=cn;var ve="Tooltip",[Sa,Me]=De(ve),dn=e=>{const{__scopeTooltip:n,children:t,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:c,delayDuration:l}=e,p=ct(ve,e.__scopeTooltip),d=Ae(n),[f,u]=s.useState(null),m=ge(),x=s.useRef(0),g=c??p.disableHoverableContent,w=l??p.delayDuration,h=s.useRef(!1),[y,v]=de({prop:r,defaultProp:a??!1,onChange:P=>{P?(p.onOpen(),document.dispatchEvent(new CustomEvent(We))):p.onClose(),i==null||i(P)},caller:ve}),b=s.useMemo(()=>y?h.current?"delayed-open":"instant-open":"closed",[y]),C=s.useCallback(()=>{window.clearTimeout(x.current),x.current=0,h.current=!1,v(!0)},[v]),j=s.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v(!1)},[v]),k=s.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{h.current=!0,v(!0),x.current=0},w)},[w,v]);return s.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),o.jsx(Jt,{...d,children:o.jsx(Sa,{scope:n,contentId:m,open:y,stateAttribute:b,trigger:f,onTriggerChange:u,onTriggerEnter:s.useCallback(()=>{p.isOpenDelayedRef.current?k():C()},[p.isOpenDelayedRef,k,C]),onTriggerLeave:s.useCallback(()=>{g?j():(window.clearTimeout(x.current),x.current=0)},[j,g]),onOpen:C,onClose:j,disableHoverableContent:g,children:t})})};dn.displayName=ve;var Ze="TooltipTrigger",un=s.forwardRef((e,n)=>{const{__scopeTooltip:t,...r}=e,a=Me(Ze,t),i=ct(Ze,t),c=Ae(t),l=s.useRef(null),p=$(n,l,a.onTriggerChange),d=s.useRef(!1),f=s.useRef(!1),u=s.useCallback(()=>d.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),o.jsx(Qt,{asChild:!0,...c,children:o.jsx(O.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:p,onPointerMove:M(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:M(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:M(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:M(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:M(e.onBlur,a.onClose),onClick:M(e.onClick,a.onClose)})})});un.displayName=Ze;var lt="TooltipPortal",[Na,Ra]=De(lt,{forceMount:void 0}),fn=e=>{const{__scopeTooltip:n,forceMount:t,children:r,container:a}=e,i=Me(lt,n);return o.jsx(Na,{scope:n,forceMount:t,children:o.jsx(te,{present:t||i.open,children:o.jsx($t,{asChild:!0,container:a,children:r})})})};fn.displayName=lt;var ce="TooltipContent",pn=s.forwardRef((e,n)=>{const t=Ra(ce,e.__scopeTooltip),{forceMount:r=t.forceMount,side:a="top",...i}=e,c=Me(ce,e.__scopeTooltip);return o.jsx(te,{present:r||c.open,children:c.disableHoverableContent?o.jsx(mn,{side:a,...i,ref:n}):o.jsx(_a,{side:a,...i,ref:n})})}),_a=s.forwardRef((e,n)=>{const t=Me(ce,e.__scopeTooltip),r=ct(ce,e.__scopeTooltip),a=s.useRef(null),i=$(n,a),[c,l]=s.useState(null),{trigger:p,onClose:d}=t,f=a.current,{onPointerInTransitChange:u}=r,m=s.useCallback(()=>{l(null),u(!1)},[u]),x=s.useCallback((g,w)=>{const h=g.currentTarget,y={x:g.clientX,y:g.clientY},v=ka(y,h.getBoundingClientRect()),b=Da(y,v),C=Aa(w.getBoundingClientRect()),j=Ga([...b,...C]);l(j),u(!0)},[u]);return s.useEffect(()=>()=>m(),[m]),s.useEffect(()=>{if(p&&f){const g=h=>x(h,f),w=h=>x(h,p);return p.addEventListener("pointerleave",g),f.addEventListener("pointerleave",w),()=>{p.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",w)}}},[p,f,x,m]),s.useEffect(()=>{if(c){const g=w=>{const h=w.target,y={x:w.clientX,y:w.clientY},v=(p==null?void 0:p.contains(h))||(f==null?void 0:f.contains(h)),b=!Oa(y,c);v?m():b&&(m(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[p,f,c,d,m]),o.jsx(mn,{...e,ref:i})}),[Ta,Ia]=De(ve,{isInside:!1}),Ea=kr("TooltipContent"),mn=s.forwardRef((e,n)=>{const{__scopeTooltip:t,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:c,...l}=e,p=Me(ce,t),d=Ae(t),{onClose:f}=p;return s.useEffect(()=>(document.addEventListener(We,f),()=>document.removeEventListener(We,f)),[f]),s.useEffect(()=>{if(p.trigger){const u=m=>{const x=m.target;x!=null&&x.contains(p.trigger)&&f()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[p.trigger,f]),o.jsx(zt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u=>u.preventDefault(),onDismiss:f,children:o.jsxs(en,{"data-state":p.stateAttribute,...d,...l,ref:n,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Ea,{children:r}),o.jsx(Ta,{scope:t,isInside:!0,children:o.jsx(Yr,{id:p.contentId,role:"tooltip",children:a||r})})]})})});pn.displayName=ce;var hn="TooltipArrow",Pa=s.forwardRef((e,n)=>{const{__scopeTooltip:t,...r}=e,a=Ae(t);return Ia(hn,t).isInside?null:o.jsx(tn,{...a,...r,ref:n})});Pa.displayName=hn;function ka(e,n){const t=Math.abs(n.top-e.y),r=Math.abs(n.bottom-e.y),a=Math.abs(n.right-e.x),i=Math.abs(n.left-e.x);switch(Math.min(t,r,a,i)){case i:return"left";case a:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Da(e,n,t=5){const r=[];switch(n){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return r}function Aa(e){const{top:n,right:t,bottom:r,left:a}=e;return[{x:a,y:n},{x:t,y:n},{x:t,y:r},{x:a,y:r}]}function Oa(e,n){const{x:t,y:r}=e;let a=!1;for(let i=0,c=n.length-1;i<n.length;c=i++){const l=n[i],p=n[c],d=l.x,f=l.y,u=p.x,m=p.y;f>r!=m>r&&t<(u-d)*(r-f)/(m-f)+d&&(a=!a)}return a}function Ga(e){const n=e.slice();return n.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),La(n)}function La(e){if(e.length<=1)return e.slice();const n=[];for(let r=0;r<e.length;r++){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],c=n[n.length-2];if((i.x-c.x)*(a.y-c.y)>=(i.y-c.y)*(a.x-c.x))n.pop();else break}n.push(a)}n.pop();const t=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(a.y-c.y)>=(i.y-c.y)*(a.x-c.x))t.pop();else break}t.push(a)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}var Fa=ln,$a=dn,za=un,Ba=fn,xn=pn;const Oe=Fa,Z=$a,J=za,X=s.forwardRef(({className:e,sideOffset:n=4,...t},r)=>o.jsx(Ba,{children:o.jsx(xn,{ref:r,sideOffset:n,className:S("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...t})}));X.displayName=xn.displayName;const He=768;function Va(){const[e,n]=s.useState(void 0);return s.useEffect(()=>{const t=window.matchMedia(`(max-width: ${He-1}px)`),r=()=>{n(window.innerWidth<He)};return t.addEventListener("change",r),n(window.innerWidth<He),()=>t.removeEventListener("change",r)},[]),!!e}var Ka="Separator",Nt="horizontal",Ua=["horizontal","vertical"],gn=s.forwardRef((e,n)=>{const{decorative:t,orientation:r=Nt,...a}=e,i=Ha(r)?r:Nt,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(O.div,{"data-orientation":i,...l,...a,ref:n})});gn.displayName=Ka;function Ha(e){return Ua.includes(e)}var vn=gn;const xe=s.forwardRef(({className:e,orientation:n="horizontal",decorative:t=!0,...r},a)=>o.jsx(vn,{ref:a,decorative:t,orientation:n,className:S("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));xe.displayName=vn.displayName;const qa=Gr,Ya=Lr,bn=s.forwardRef(({className:e,...n},t)=>o.jsx(Ut,{className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:t}));bn.displayName=Ut.displayName;const Xa=Lt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),wn=s.forwardRef(({side:e="right",className:n,children:t,...r},a)=>o.jsxs(Ya,{children:[o.jsx(bn,{}),o.jsxs(Bt,{ref:a,className:S(Xa({side:e}),n),...r,children:[o.jsxs(Fr,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx($r,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),t]})]}));wn.displayName=Bt.displayName;const yn=({className:e,...n})=>o.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",e),...n});yn.displayName="SheetHeader";const Cn=s.forwardRef(({className:e,...n},t)=>o.jsx(Vt,{ref:t,className:S("text-lg font-semibold text-foreground",e),...n}));Cn.displayName=Vt.displayName;const jn=s.forwardRef(({className:e,...n},t)=>o.jsx(Kt,{ref:t,className:S("text-sm text-muted-foreground",e),...n}));jn.displayName=Kt.displayName;function Rt({className:e,...n}){return o.jsx("div",{className:S("animate-pulse rounded-md bg-primary/10",e),...n})}const Wa="sidebar_state",Za=60*60*24*7,Ja="16rem",Qa="18rem",es="3rem",ts="b",Mn=s.createContext(null);function Se(){const e=s.useContext(Mn);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Sn=s.forwardRef(({defaultOpen:e=!0,open:n,onOpenChange:t,className:r,style:a,children:i,...c},l)=>{const p=Va(),[d,f]=s.useState(!1),[u,m]=s.useState(e),x=n??u,g=s.useCallback(v=>{const b=typeof v=="function"?v(x):v;t?t(b):m(b),document.cookie=`${Wa}=${b}; path=/; max-age=${Za}`},[t,x]),w=s.useCallback(()=>p?f(v=>!v):g(v=>!v),[p,g,f]);s.useEffect(()=>{const v=b=>{b.key===ts&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),w())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[w]);const h=x?"expanded":"collapsed",y=s.useMemo(()=>({state:h,open:x,setOpen:g,isMobile:p,openMobile:d,setOpenMobile:f,toggleSidebar:w}),[h,x,g,p,d,f,w]);return o.jsx(Mn.Provider,{value:y,children:o.jsx(Oe,{delayDuration:0,children:o.jsx("div",{style:{"--sidebar-width":Ja,"--sidebar-width-icon":es,...a},className:S("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...c,children:i})})})});Sn.displayName="SidebarProvider";const Nn=s.forwardRef(({side:e="left",variant:n="sidebar",collapsible:t="offcanvas",className:r,children:a,...i},c)=>{const{isMobile:l,state:p,openMobile:d,setOpenMobile:f}=Se();return t==="none"?o.jsx("div",{className:S("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:c,...i,children:a}):l?o.jsx(qa,{open:d,onOpenChange:f,...i,children:o.jsxs(wn,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Qa},side:e,children:[o.jsxs(yn,{className:"sr-only",children:[o.jsx(Cn,{children:"Sidebar"}),o.jsx(jn,{children:"Displays the mobile sidebar."})]}),o.jsx("div",{className:"flex flex-col w-full h-full",children:a})]})}):o.jsxs("div",{ref:c,className:"hidden group peer text-sidebar-foreground md:block","data-state":p,"data-collapsible":p==="collapsed"?t:"","data-variant":n,"data-side":e,children:[o.jsx("div",{className:S("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",n==="floating"||n==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),o.jsx("div",{className:S("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",n==="floating"||n==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:o.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});Nn.displayName="Sidebar";const ns=s.forwardRef(({className:e,onClick:n,...t},r)=>{const{toggleSidebar:a}=Se();return o.jsxs(U,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:S("h-7 w-7",e),onClick:i=>{n==null||n(i),a()},...t,children:[o.jsx(xa,{}),o.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});ns.displayName="SidebarTrigger";const os=s.forwardRef(({className:e,...n},t)=>{const{toggleSidebar:r}=Se();return o.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:S("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...n})});os.displayName="SidebarRail";const rs=s.forwardRef(({className:e,...n},t)=>o.jsx("main",{ref:t,className:S("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...n}));rs.displayName="SidebarInset";const as=s.forwardRef(({className:e,...n},t)=>o.jsx(Ie,{ref:t,"data-sidebar":"input",className:S("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...n}));as.displayName="SidebarInput";const Rn=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"header",className:S("flex flex-col gap-2 p-2",e),...n}));Rn.displayName="SidebarHeader";const ss=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"footer",className:S("flex flex-col gap-2 p-2",e),...n}));ss.displayName="SidebarFooter";const is=s.forwardRef(({className:e,...n},t)=>o.jsx(xe,{ref:t,"data-sidebar":"separator",className:S("mx-2 w-auto bg-sidebar-border",e),...n}));is.displayName="SidebarSeparator";const _n=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"content",className:S("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...n}));_n.displayName="SidebarContent";const cs=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"group",className:S("relative flex w-full min-w-0 flex-col p-2",e),...n}));cs.displayName="SidebarGroup";const ls=s.forwardRef(({className:e,asChild:n=!1,...t},r)=>{const a=n?Ce:"div";return o.jsx(a,{ref:r,"data-sidebar":"group-label",className:S("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...t})});ls.displayName="SidebarGroupLabel";const ds=s.forwardRef(({className:e,asChild:n=!1,...t},r)=>{const a=n?Ce:"button";return o.jsx(a,{ref:r,"data-sidebar":"group-action",className:S("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...t})});ds.displayName="SidebarGroupAction";const us=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"group-content",className:S("w-full text-sm",e),...n}));us.displayName="SidebarGroupContent";const fs=s.forwardRef(({className:e,...n},t)=>o.jsx("ul",{ref:t,"data-sidebar":"menu",className:S("flex w-full min-w-0 flex-col gap-1",e),...n}));fs.displayName="SidebarMenu";const ps=s.forwardRef(({className:e,...n},t)=>o.jsx("li",{ref:t,"data-sidebar":"menu-item",className:S("group/menu-item relative",e),...n}));ps.displayName="SidebarMenuItem";const ms=Lt("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),hs=s.forwardRef(({asChild:e=!1,isActive:n=!1,variant:t="default",size:r="default",tooltip:a,className:i,...c},l)=>{const p=e?Ce:"button",{isMobile:d,state:f}=Se(),u=o.jsx(p,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":n,className:S(ms({variant:t,size:r}),i),...c});return a?(typeof a=="string"&&(a={children:a}),o.jsxs(Z,{children:[o.jsx(J,{asChild:!0,children:u}),o.jsx(X,{side:"right",align:"center",hidden:f!=="collapsed"||d,...a})]})):u});hs.displayName="SidebarMenuButton";const xs=s.forwardRef(({className:e,asChild:n=!1,showOnHover:t=!1,...r},a)=>{const i=n?Ce:"button";return o.jsx(i,{ref:a,"data-sidebar":"menu-action",className:S("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});xs.displayName="SidebarMenuAction";const gs=s.forwardRef(({className:e,...n},t)=>o.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:S("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...n}));gs.displayName="SidebarMenuBadge";const vs=s.forwardRef(({className:e,showIcon:n=!1,...t},r)=>{const a=s.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return o.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:S("flex h-8 items-center gap-2 rounded-md px-2",e),...t,children:[n&&o.jsx(Rt,{className:"rounded-md size-4","data-sidebar":"menu-skeleton-icon"}),o.jsx(Rt,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});vs.displayName="SidebarMenuSkeleton";const bs=s.forwardRef(({className:e,...n},t)=>o.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:S("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...n}));bs.displayName="SidebarMenuSub";const ws=s.forwardRef(({...e},n)=>o.jsx("li",{ref:n,...e}));ws.displayName="SidebarMenuSubItem";const ys=s.forwardRef(({asChild:e=!1,size:n="md",isActive:t,className:r,...a},i)=>{const c=e?Ce:"a";return o.jsx(c,{ref:i,"data-sidebar":"menu-sub-button","data-size":n,"data-active":t,className:S("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",n==="sm"&&"text-xs",n==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});ys.displayName="SidebarMenuSubButton";var qe="rovingFocusGroup.onEntryFocus",Cs={bubbles:!1,cancelable:!0},Ne="RovingFocusGroup",[Je,Tn,js]=it(Ne),[Ms,ue]=ee(Ne,[js]),[Ss,Ns]=Ms(Ne),In=s.forwardRef((e,n)=>o.jsx(Je.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Je.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Rs,{...e,ref:n})})}));In.displayName=Ne;var Rs=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:a=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:p,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...u}=e,m=s.useRef(null),x=$(n,m),g=je(i),[w,h]=de({prop:c,defaultProp:l??null,onChange:p,caller:Ne}),[y,v]=s.useState(!1),b=st(d),C=Tn(t),j=s.useRef(!1),[k,P]=s.useState(0);return s.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(qe,b),()=>E.removeEventListener(qe,b)},[b]),o.jsx(Ss,{scope:t,orientation:r,dir:g,loop:a,currentTabStopId:w,onItemFocus:s.useCallback(E=>h(E),[h]),onItemShiftTab:s.useCallback(()=>v(!0),[]),onFocusableItemAdd:s.useCallback(()=>P(E=>E+1),[]),onFocusableItemRemove:s.useCallback(()=>P(E=>E-1),[]),children:o.jsx(O.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...u,ref:x,style:{outline:"none",...e.style},onMouseDown:M(e.onMouseDown,()=>{j.current=!0}),onFocus:M(e.onFocus,E=>{const L=!j.current;if(E.target===E.currentTarget&&L&&!y){const _=new CustomEvent(qe,Cs);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const I=C().filter(G=>G.focusable),A=I.find(G=>G.active),D=I.find(G=>G.id===w),T=[A,D,...I].filter(Boolean).map(G=>G.ref.current);kn(T,f)}}j.current=!1}),onBlur:M(e.onBlur,()=>v(!1))})})}),En="RovingFocusGroupItem",Pn=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:a=!1,tabStopId:i,children:c,...l}=e,p=ge(),d=i||p,f=Ns(En,t),u=f.currentTabStopId===d,m=Tn(t),{onFocusableItemAdd:x,onFocusableItemRemove:g,currentTabStopId:w}=f;return s.useEffect(()=>{if(r)return x(),()=>g()},[r,x,g]),o.jsx(Je.ItemSlot,{scope:t,id:d,focusable:r,active:a,children:o.jsx(O.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:n,onMouseDown:M(e.onMouseDown,h=>{r?f.onItemFocus(d):h.preventDefault()}),onFocus:M(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:M(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){f.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const y=Is(h,f.orientation,f.dir);if(y!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let b=m().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const C=b.indexOf(h.currentTarget);b=f.loop?Es(b,C+1):b.slice(C+1)}setTimeout(()=>kn(b))}}),children:typeof c=="function"?c({isCurrentTabStop:u,hasTabStop:w!=null}):c})})});Pn.displayName=En;var _s={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ts(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Is(e,n,t){const r=Ts(e.key,t);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _s[r]}function kn(e,n=!1){const t=document.activeElement;for(const r of e)if(r===t||(r.focus({preventScroll:n}),document.activeElement!==t))return}function Es(e,n){return e.map((t,r)=>e[(n+r)%e.length])}var dt=In,ut=Pn,ft="Radio",[Ps,Dn]=ee(ft),[ks,Ds]=Ps(ft),An=s.forwardRef((e,n)=>{const{__scopeRadio:t,name:r,checked:a=!1,required:i,disabled:c,value:l="on",onCheck:p,form:d,...f}=e,[u,m]=s.useState(null),x=$(n,h=>m(h)),g=s.useRef(!1),w=u?d||!!u.closest("form"):!0;return o.jsxs(ks,{scope:t,checked:a,disabled:c,children:[o.jsx(O.button,{type:"button",role:"radio","aria-checked":a,"data-state":Fn(a),"data-disabled":c?"":void 0,disabled:c,value:l,...f,ref:x,onClick:M(e.onClick,h=>{a||p==null||p(),w&&(g.current=h.isPropagationStopped(),g.current||h.stopPropagation())})}),w&&o.jsx(Ln,{control:u,bubbles:!g.current,name:r,value:l,checked:a,required:i,disabled:c,form:d,style:{transform:"translateX(-100%)"}})]})});An.displayName=ft;var On="RadioIndicator",Gn=s.forwardRef((e,n)=>{const{__scopeRadio:t,forceMount:r,...a}=e,i=Ds(On,t);return o.jsx(te,{present:r||i.checked,children:o.jsx(O.span,{"data-state":Fn(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:n})})});Gn.displayName=On;var As="RadioBubbleInput",Ln=s.forwardRef(({__scopeRadio:e,control:n,checked:t,bubbles:r=!0,...a},i)=>{const c=s.useRef(null),l=$(c,i),p=nn(t),d=on(n);return s.useEffect(()=>{const f=c.current;if(!f)return;const u=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(u,"checked").set;if(p!==t&&x){const g=new Event("click",{bubbles:r});x.call(f,t),f.dispatchEvent(g)}},[p,t,r]),o.jsx(O.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ln.displayName=As;function Fn(e){return e?"checked":"unchecked"}var Os=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ge="RadioGroup",[Gs,cl]=ee(Ge,[ue,Dn]),$n=ue(),zn=Dn(),[Ls,Fs]=Gs(Ge),Bn=s.forwardRef((e,n)=>{const{__scopeRadioGroup:t,name:r,defaultValue:a,value:i,required:c=!1,disabled:l=!1,orientation:p,dir:d,loop:f=!0,onValueChange:u,...m}=e,x=$n(t),g=je(d),[w,h]=de({prop:i,defaultProp:a??null,onChange:u,caller:Ge});return o.jsx(Ls,{scope:t,name:r,required:c,disabled:l,value:w,onValueChange:h,children:o.jsx(dt,{asChild:!0,...x,orientation:p,dir:g,loop:f,children:o.jsx(O.div,{role:"radiogroup","aria-required":c,"aria-orientation":p,"data-disabled":l?"":void 0,dir:g,...m,ref:n})})})});Bn.displayName=Ge;var Vn="RadioGroupItem",Kn=s.forwardRef((e,n)=>{const{__scopeRadioGroup:t,disabled:r,...a}=e,i=Fs(Vn,t),c=i.disabled||r,l=$n(t),p=zn(t),d=s.useRef(null),f=$(n,d),u=i.value===a.value,m=s.useRef(!1);return s.useEffect(()=>{const x=w=>{Os.includes(w.key)&&(m.current=!0)},g=()=>m.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",g)}},[]),o.jsx(ut,{asChild:!0,...l,focusable:!c,active:u,children:o.jsx(An,{disabled:c,required:i.required,checked:u,...p,...a,name:i.name,ref:f,onCheck:()=>i.onValueChange(a.value),onKeyDown:M(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:M(a.onFocus,()=>{var x;m.current&&((x=d.current)==null||x.click())})})})});Kn.displayName=Vn;var $s="RadioGroupIndicator",Un=s.forwardRef((e,n)=>{const{__scopeRadioGroup:t,...r}=e,a=zn(t);return o.jsx(Gn,{...a,...r,ref:n})});Un.displayName=$s;var Hn=Bn,qn=Kn,zs=Un;const me=s.forwardRef(({className:e,...n},t)=>o.jsx(Hn,{className:S("grid gap-2",e),...n,ref:t}));me.displayName=Hn.displayName;const se=s.forwardRef(({className:e,...n},t)=>o.jsx(qn,{ref:t,className:S("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:o.jsx(zs,{className:"flex items-center justify-center",children:o.jsx(sn,{className:"h-3.5 w-3.5 fill-primary"})})}));se.displayName=qn.displayName;const Yn="gridConfigs",ie={square:{cols:20,rows:20,tileSize:30,ppi:80,borderWidth:1,borderColor:"#000000"},"hex-flat":{cols:30,rows:25,tileSize:30,ppi:80,borderWidth:1,borderColor:"#000000"},"hex-pointy":{cols:25,rows:30,tileSize:30,ppi:80,borderWidth:1,borderColor:"#000000"}},Xn=(e,n)=>{try{const r={...Wn(),[e]:n};localStorage.setItem(Yn,JSON.stringify(r))}catch(t){console.warn("Failed to save grid config:",t)}},Qe=e=>{try{return Wn()[e]||ie[e]}catch(n){return console.warn("Failed to load grid config:",n),ie[e]}},Wn=()=>{try{const e=localStorage.getItem(Yn);if(e){const n=JSON.parse(e);return{square:{...ie.square,...n.square},"hex-flat":{...ie["hex-flat"],...n["hex-flat"]},"hex-pointy":{...ie["hex-pointy"],...n["hex-pointy"]}}}}catch(e){console.warn("Failed to parse stored configs:",e)}return ie},Te=e=>e==="square"?"square":e.includes("flat")?"hex-flat":"hex-pointy",Bs=[{label:'24"',inches:24},{label:'27"',inches:27},{label:'32"',inches:32},{label:'43"',inches:43},{label:'50"',inches:50},{label:'55"',inches:55},{label:'65"',inches:65},{label:'75"',inches:75},{label:'85"',inches:85}],Vs=[{label:"61cm",inches:24},{label:"69cm",inches:27},{label:"81cm",inches:32},{label:"109cm",inches:43},{label:"127cm",inches:50},{label:"140cm",inches:55},{label:"165cm",inches:65},{label:"191cm",inches:75},{label:"216cm",inches:85}],_t=[{label:"1080p",width:1920,height:1080},{label:"1440p",width:2560,height:1440},{label:"4K",width:3840,height:2160},{label:"8K",width:7680,height:4320}],Tt=[{label:"1 inch tiles",inches:1},{label:"2cm tiles",inches:.787}],Ks=({currentGridType:e,onPresetSelect:n})=>{const[t,r]=s.useState(!1),[a,i]=s.useState("inches"),[c,l]=s.useState("55"),[p,d]=s.useState("4K"),[f,u]=s.useState("1 inch tiles"),m=()=>{const h=parseFloat(c),y=_t.find(b=>b.label===p),v=Tt.find(b=>b.label===f).inches;return{tvSize:h,resolution:y,tileSize:v}},x=(h,y,v,b)=>{let C,j;switch(b){case"square":C=Math.floor(h/v),j=Math.floor(y/v);break;case"hex-flat":C=Math.floor(h/v*1.25),j=Math.floor(y/v*1.1);break;case"hex-pointy":C=Math.floor(h/v*1.1),j=Math.floor(y/v*1.25);break}return{cols:C,rows:j}},g=()=>{const h=m(),y=Math.sqrt(h.resolution.width**2+h.resolution.height**2),v=Math.floor(y/h.tvSize),b=h.resolution.width/v,C=h.resolution.height/v,j=Math.round(h.tileSize*v),k=`${h.tvSize}" ${p} (${f})`;["square","hex-flat","hex-pointy"].forEach(I=>{const{cols:A,rows:D}=x(b,C,h.tileSize,I),N=Qe(I),T={cols:A,rows:D,tileSize:j,ppi:v,borderWidth:N.borderWidth,borderColor:N.borderColor};Xn(I,T)});const E=Te(e),{cols:L,rows:_}=x(b,C,h.tileSize,E);n({ppi:v,tileSize:j,cols:L,rows:_,displayName:k}),r(!1)},w=a==="inches"?Bs:Vs;return o.jsx("div",{className:"space-y-3",children:o.jsx(Oe,{delayDuration:0,children:o.jsxs(Ht,{open:t,onOpenChange:r,children:[o.jsxs(Z,{children:[o.jsx(J,{asChild:!0,children:o.jsx(zr,{asChild:!0,children:o.jsx(U,{variant:"outline",size:"icon",children:o.jsx(da,{})})})}),o.jsx(X,{children:o.jsx("p",{children:"Configure Display Preset"})})]}),o.jsxs(qt,{className:"max-w-md",children:[o.jsxs(Yt,{children:[o.jsx(Xt,{children:"Configure Display Preset"}),o.jsx(Wt,{children:"This is for displaying battle maps on a horizontal TV or monitor at 100% zoom. It fills the screen and sizes tiles so your minis and tokens fit perfectly without any manual scaling."})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(F,{className:"text-sm font-medium",children:"Measurement Unit"}),o.jsxs(me,{value:a,onValueChange:h=>{i(h),l(h==="inches"?"55":"140cm")},className:"flex space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(se,{value:"inches",id:"inches"}),o.jsx(F,{htmlFor:"inches",className:"text-sm",children:"Inches"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(se,{value:"cm",id:"cm"}),o.jsx(F,{htmlFor:"cm",className:"text-sm",children:"Centimeters"})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(F,{className:"text-sm font-medium",children:"TV/Monitor Size"}),o.jsx(me,{value:c,onValueChange:l,className:"grid grid-cols-3 gap-2",children:w.map(h=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(se,{value:h.inches.toString(),id:h.label}),o.jsx(F,{htmlFor:h.label,className:"text-sm",children:h.label})]},h.label))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(F,{className:"text-sm font-medium",children:"Resolution"}),o.jsx(me,{value:p,onValueChange:d,className:"grid grid-cols-2 gap-2",children:_t.map(h=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(se,{value:h.label,id:h.label}),o.jsxs(F,{htmlFor:h.label,className:"text-sm",children:[h.label,o.jsxs("span",{className:"block text-xs text-muted-foreground",children:[h.width,"×",h.height]})]})]},h.label))})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(F,{className:"text-sm font-medium",children:"Tile Size"}),o.jsx(me,{value:f,onValueChange:u,className:"space-y-2",children:Tt.map(h=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(se,{value:h.label,id:h.label}),o.jsx(F,{htmlFor:h.label,className:"text-sm",children:h.label})]},h.label))})]})]}),o.jsxs(Zt,{children:[o.jsx(U,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),o.jsx(U,{onClick:g,children:"Apply Preset"})]})]})]})})})};var Le="Tabs",[Us,ll]=ee(Le,[ue]),Zn=ue(),[Hs,pt]=Us(Le),Jn=s.forwardRef((e,n)=>{const{__scopeTabs:t,value:r,onValueChange:a,defaultValue:i,orientation:c="horizontal",dir:l,activationMode:p="automatic",...d}=e,f=je(l),[u,m]=de({prop:r,onChange:a,defaultProp:i??"",caller:Le});return o.jsx(Hs,{scope:t,baseId:ge(),value:u,onValueChange:m,orientation:c,dir:f,activationMode:p,children:o.jsx(O.div,{dir:f,"data-orientation":c,...d,ref:n})})});Jn.displayName=Le;var Qn="TabsList",eo=s.forwardRef((e,n)=>{const{__scopeTabs:t,loop:r=!0,...a}=e,i=pt(Qn,t),c=Zn(t);return o.jsx(dt,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(O.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:n})})});eo.displayName=Qn;var to="TabsTrigger",no=s.forwardRef((e,n)=>{const{__scopeTabs:t,value:r,disabled:a=!1,...i}=e,c=pt(to,t),l=Zn(t),p=ao(c.baseId,r),d=so(c.baseId,r),f=r===c.value;return o.jsx(ut,{asChild:!0,...l,focusable:!a,active:f,children:o.jsx(O.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:p,...i,ref:n,onMouseDown:M(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?c.onValueChange(r):u.preventDefault()}),onKeyDown:M(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&c.onValueChange(r)}),onFocus:M(e.onFocus,()=>{const u=c.activationMode!=="manual";!f&&!a&&u&&c.onValueChange(r)})})})});no.displayName=to;var oo="TabsContent",ro=s.forwardRef((e,n)=>{const{__scopeTabs:t,value:r,forceMount:a,children:i,...c}=e,l=pt(oo,t),p=ao(l.baseId,r),d=so(l.baseId,r),f=r===l.value,u=s.useRef(f);return s.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(te,{present:a||f,children:({present:m})=>o.jsx(O.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":p,hidden:!m,id:d,tabIndex:0,...c,ref:n,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&i})})});ro.displayName=oo;function ao(e,n){return`${e}-trigger-${n}`}function so(e,n){return`${e}-content-${n}`}var qs=Jn,io=eo,co=no,lo=ro;const Ys=qs,uo=s.forwardRef(({className:e,...n},t)=>o.jsx(io,{ref:t,className:S("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...n}));uo.displayName=io.displayName;const fo=s.forwardRef(({className:e,...n},t)=>o.jsx(co,{ref:t,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...n}));fo.displayName=co.displayName;const Xs=s.forwardRef(({className:e,...n},t)=>o.jsx(lo,{ref:t,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n}));Xs.displayName=lo.displayName;const Ws=[{value:"square",icon:sa,label:"Square"},{value:"hex-flat-odd",imageSrc:"/assets/img/hex-flat-odd.svg",label:"Flat Odd"},{value:"hex-flat-even",imageSrc:"/assets/img/hex-flat-even.svg",label:"Flat Even"},{value:"hex-pointy-odd",imageSrc:"/assets/img/hex-pointy-odd.svg",label:"Pointy Odd"},{value:"hex-pointy-even",imageSrc:"/assets/img/hex-pointy-even.svg",label:"Pointy Even"}],Zs=({gridType:e,onGridTypeChange:n})=>o.jsxs("div",{className:"space-y-3",children:[o.jsx(F,{className:"text-sm font-medium",children:"Grid Type"}),o.jsx(Ys,{value:e,onValueChange:t=>n(t),className:"w-full",children:o.jsx(uo,{className:"w-full gap-1 p-1",children:Ws.map(t=>o.jsx(fo,{value:t.value,className:"flex items-center justify-center gap-2 px-3 py-2 h-auto text-xs data-[state=active]:bg-primary data-[state=active]:text-primary-foreground w-full",children:"icon"in t?o.jsx(t.icon,{className:"flex-shrink-0 w-5 h-5"}):o.jsx("img",{src:t.imageSrc,alt:t.label,className:`flex-shrink-0 w-6 h-6 transition-all duration-200 ${e===t.value?"invert":""}`})},t.value))})})]});var po=["PageUp","PageDown"],mo=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ho={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},fe="Slider",[et,Js,Qs]=it(fe),[xo,dl]=ee(fe,[Qs]),[ei,Fe]=xo(fe),go=s.forwardRef((e,n)=>{const{name:t,min:r=0,max:a=100,step:i=1,orientation:c="horizontal",disabled:l=!1,minStepsBetweenThumbs:p=0,defaultValue:d=[r],value:f,onValueChange:u=()=>{},onValueCommit:m=()=>{},inverted:x=!1,form:g,...w}=e,h=s.useRef(new Set),y=s.useRef(0),b=c==="horizontal"?ti:ni,[C=[],j]=de({prop:f,defaultProp:d,onChange:I=>{var D;(D=[...h.current][y.current])==null||D.focus(),u(I)}}),k=s.useRef(C);function P(I){const A=ii(C,I);_(I,A)}function E(I){_(I,y.current)}function L(){const I=k.current[y.current];C[y.current]!==I&&m(C)}function _(I,A,{commit:D}={commit:!1}){const N=ui(i),T=fi(Math.round((I-r)/i)*i+r,N),G=rn(T,[r,a]);j((q=[])=>{const V=ai(q,G,A);if(di(V,p*i)){y.current=V.indexOf(G);const R=String(V)!==String(q);return R&&D&&m(V),R?V:q}else return q})}return o.jsx(ei,{scope:e.__scopeSlider,name:t,disabled:l,min:r,max:a,valueIndexToChangeRef:y,thumbs:h.current,values:C,orientation:c,form:g,children:o.jsx(et.Provider,{scope:e.__scopeSlider,children:o.jsx(et.Slot,{scope:e.__scopeSlider,children:o.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:n,onPointerDown:M(w.onPointerDown,()=>{l||(k.current=C)}),min:r,max:a,inverted:x,onSlideStart:l?void 0:P,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:L,onHomeKeyDown:()=>!l&&_(r,0,{commit:!0}),onEndKeyDown:()=>!l&&_(a,C.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:A})=>{if(!l){const T=po.includes(I.key)||I.shiftKey&&mo.includes(I.key)?10:1,G=y.current,q=C[G],V=i*T*A;_(q+V,G,{commit:!0})}}})})})})});go.displayName=fe;var[vo,bo]=xo(fe,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ti=s.forwardRef((e,n)=>{const{min:t,max:r,dir:a,inverted:i,onSlideStart:c,onSlideMove:l,onSlideEnd:p,onStepKeyDown:d,...f}=e,[u,m]=s.useState(null),x=$(n,b=>m(b)),g=s.useRef(void 0),w=je(a),h=w==="ltr",y=h&&!i||!h&&i;function v(b){const C=g.current||u.getBoundingClientRect(),j=[0,C.width],P=mt(j,y?[t,r]:[r,t]);return g.current=C,P(b-C.left)}return o.jsx(vo,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:o.jsx(wo,{dir:w,"data-orientation":"horizontal",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const C=v(b.clientX);c==null||c(C)},onSlideMove:b=>{const C=v(b.clientX);l==null||l(C)},onSlideEnd:()=>{g.current=void 0,p==null||p()},onStepKeyDown:b=>{const j=ho[y?"from-left":"from-right"].includes(b.key);d==null||d({event:b,direction:j?-1:1})}})})}),ni=s.forwardRef((e,n)=>{const{min:t,max:r,inverted:a,onSlideStart:i,onSlideMove:c,onSlideEnd:l,onStepKeyDown:p,...d}=e,f=s.useRef(null),u=$(n,f),m=s.useRef(void 0),x=!a;function g(w){const h=m.current||f.current.getBoundingClientRect(),y=[0,h.height],b=mt(y,x?[r,t]:[t,r]);return m.current=h,b(w-h.top)}return o.jsx(vo,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:o.jsx(wo,{"data-orientation":"vertical",...d,ref:u,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const h=g(w.clientY);i==null||i(h)},onSlideMove:w=>{const h=g(w.clientY);c==null||c(h)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const y=ho[x?"from-bottom":"from-top"].includes(w.key);p==null||p({event:w,direction:y?-1:1})}})})}),wo=s.forwardRef((e,n)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:c,onEndKeyDown:l,onStepKeyDown:p,...d}=e,f=Fe(fe,t);return o.jsx(O.span,{...d,ref:n,onKeyDown:M(e.onKeyDown,u=>{u.key==="Home"?(c(u),u.preventDefault()):u.key==="End"?(l(u),u.preventDefault()):po.concat(mo).includes(u.key)&&(p(u),u.preventDefault())}),onPointerDown:M(e.onPointerDown,u=>{const m=u.target;m.setPointerCapture(u.pointerId),u.preventDefault(),f.thumbs.has(m)?m.focus():r(u)}),onPointerMove:M(e.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&a(u)}),onPointerUp:M(e.onPointerUp,u=>{const m=u.target;m.hasPointerCapture(u.pointerId)&&(m.releasePointerCapture(u.pointerId),i(u))})})}),yo="SliderTrack",Co=s.forwardRef((e,n)=>{const{__scopeSlider:t,...r}=e,a=Fe(yo,t);return o.jsx(O.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:n})});Co.displayName=yo;var tt="SliderRange",jo=s.forwardRef((e,n)=>{const{__scopeSlider:t,...r}=e,a=Fe(tt,t),i=bo(tt,t),c=s.useRef(null),l=$(n,c),p=a.values.length,d=a.values.map(m=>No(m,a.min,a.max)),f=p>1?Math.min(...d):0,u=100-Math.max(...d);return o.jsx(O.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:l,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:u+"%"}})});jo.displayName=tt;var nt="SliderThumb",Mo=s.forwardRef((e,n)=>{const t=Js(e.__scopeSlider),[r,a]=s.useState(null),i=$(n,l=>a(l)),c=s.useMemo(()=>r?t().findIndex(l=>l.ref.current===r):-1,[t,r]);return o.jsx(oi,{...e,ref:i,index:c})}),oi=s.forwardRef((e,n)=>{const{__scopeSlider:t,index:r,name:a,...i}=e,c=Fe(nt,t),l=bo(nt,t),[p,d]=s.useState(null),f=$(n,v=>d(v)),u=p?c.form||!!p.closest("form"):!0,m=on(p),x=c.values[r],g=x===void 0?0:No(x,c.min,c.max),w=si(r,c.values.length),h=m==null?void 0:m[l.size],y=h?ci(h,g,l.direction):0;return s.useEffect(()=>{if(p)return c.thumbs.add(p),()=>{c.thumbs.delete(p)}},[p,c.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${y}px)`},children:[o.jsx(et.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(O.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":c.min,"aria-valuenow":x,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...i,ref:f,style:x===void 0?{display:"none"}:e.style,onFocus:M(e.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),u&&o.jsx(So,{name:a??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:x},r)]})});Mo.displayName=nt;var ri="RadioBubbleInput",So=s.forwardRef(({__scopeSlider:e,value:n,...t},r)=>{const a=s.useRef(null),i=$(a,r),c=nn(n);return s.useEffect(()=>{const l=a.current;if(!l)return;const p=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(p,"value").set;if(c!==n&&f){const u=new Event("input",{bubbles:!0});f.call(l,n),l.dispatchEvent(u)}},[c,n]),o.jsx(O.input,{style:{display:"none"},...t,ref:i,defaultValue:n})});So.displayName=ri;function ai(e=[],n,t){const r=[...e];return r[t]=n,r.sort((a,i)=>a-i)}function No(e,n,t){const i=100/(t-n)*(e-n);return rn(i,[0,100])}function si(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function ii(e,n){if(e.length===1)return 0;const t=e.map(a=>Math.abs(a-n)),r=Math.min(...t);return t.indexOf(r)}function ci(e,n,t){const r=e/2,i=mt([0,50],[0,r]);return(r-i(n)*t)*t}function li(e){return e.slice(0,-1).map((n,t)=>e[t+1]-n)}function di(e,n){if(n>0){const t=li(e);return Math.min(...t)>=n}return!0}function mt(e,n){return t=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(e[1]-e[0]);return n[0]+r*(t-e[0])}}function ui(e){return(String(e).split(".")[1]||"").length}function fi(e,n){const t=Math.pow(10,n);return Math.round(e*t)/t}var Ro=go,pi=Co,mi=jo,hi=Mo;const le=s.forwardRef(({className:e,...n},t)=>o.jsxs(Ro,{ref:t,className:S("relative flex w-full touch-none select-none items-center",e),...n,children:[o.jsx(pi,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:o.jsx(mi,{className:"absolute h-full bg-primary"})}),o.jsx(hi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));le.displayName=Ro.displayName;const xi=({cols:e,rows:n,onColsChange:t,onRowsChange:r,maxCols:a=50,maxRows:i=50,hasWebGL:c=!1})=>{var h,y;const[l,p]=s.useState(e.toString()),[d,f]=s.useState(n.toString()),u=v=>{const b=v==="width"?a:i;return c?`You can have up to ${b.toLocaleString()} tiles in ${v} with WebGL acceleration because you have a graphics card.`:`You can have up to ${b} tiles in ${v} without WebGL acceleration because you don't have a WebGL-capable graphics cards`},m=v=>{const b=parseInt(v,10);!isNaN(b)&&b>=1&&b<=a?(t(b),p(b.toString())):p(e.toString())},x=v=>{const b=parseInt(v,10);!isNaN(b)&&b>=1&&b<=i?(r(b),f(b.toString())):f(n.toString())},g=v=>{v.key==="Enter"&&(m(l),v.currentTarget.blur())},w=v=>{v.key==="Enter"&&(x(d),v.currentTarget.blur())};return e.toString()!==l&&((h=document.activeElement)==null?void 0:h.tagName)!=="INPUT"&&p(e.toString()),n.toString()!==d&&((y=document.activeElement)==null?void 0:y.tagName)!=="INPUT"&&f(n.toString()),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(F,{className:"text-sm font-medium",children:["Width: ",e," tiles"]}),o.jsxs(Z,{delayDuration:0,children:[o.jsx(J,{asChild:!0,children:o.jsx(Xe,{className:"w-4 h-4 text-muted-foreground hover:text-foreground cursor-help"})}),o.jsx(X,{className:"max-w-sm",children:o.jsx("p",{className:"text-xs",children:u("width")})})]})]}),o.jsx(Ie,{value:l,onChange:v=>p(v.target.value),onBlur:()=>m(l),onKeyDown:g,className:"w-16 h-8 text-xs text-center",placeholder:e.toString()})]}),o.jsx(le,{value:[e],onValueChange:v=>t(v[0]),min:1,max:a,step:1})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(F,{className:"text-sm font-medium",children:["Height: ",n," tiles"]}),o.jsxs(Z,{delayDuration:0,children:[o.jsx(J,{asChild:!0,children:o.jsx(Xe,{className:"w-4 h-4 text-muted-foreground hover:text-foreground cursor-help"})}),o.jsx(X,{className:"max-w-sm",children:o.jsx("p",{className:"text-xs",children:u("height")})})]})]}),o.jsx(Ie,{value:d,onChange:v=>f(v.target.value),onBlur:()=>x(d),onKeyDown:w,className:"w-16 h-8 text-xs text-center",placeholder:n.toString()})]}),o.jsx(le,{value:[n],onValueChange:v=>r(v[0]),min:1,max:i,step:1})]})]})},gi=({tileSize:e,ppi:n,onTileSizeChange:t,onPpiChange:r,minTileSize:a=Tr,maxTileSize:i=Ir,minPpi:c=Er,maxPpi:l=Pr})=>{const p=e/n;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(F,{className:"text-sm font-medium",children:["Tile Size: ",e,"px (",p.toFixed(2),"″)"]}),o.jsxs(Z,{delayDuration:0,children:[o.jsx(J,{asChild:!0,children:o.jsx("img",{src:"/assets/img/fvtt.png",alt:"FoundryVTT icon",width:16,height:16,className:"cursor-help"})}),o.jsx(X,{side:"top",className:"max-w-xs",children:"FoundryVTT requires a minimum Tile Size of 50 px. We automatically set it to a minimum of 50 upon export, so don't worry 😁"})]})]}),o.jsx(le,{value:[e],onValueChange:d=>t(d[0]),min:a,max:i,step:1,className:"mt-2"})]}),o.jsxs("div",{className:"hidden",children:[o.jsxs(F,{className:"text-sm font-medium",children:["PPI: ",n]}),o.jsx(le,{value:[n],onValueChange:d=>r(d[0]),min:c,max:l,step:1,className:"mt-2"})]})]})},vi=({borderWidth:e,borderColor:n,onBorderWidthChange:t,onBorderColorChange:r})=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(F,{className:"text-sm font-medium",children:["Border Width: ",e,"px"]}),o.jsxs(Z,{delayDuration:0,children:[o.jsx(J,{asChild:!0,children:o.jsx("img",{src:"/assets/img/fvtt.png",alt:"FoundryVTT icon",width:16,height:16,className:"cursor-help"})}),o.jsx(X,{side:"top",className:"max-w-xs",children:"Using default settings, FoundryVTT does not support a border. We automatically set it to 0 upon export, so don't worry 😁"})]})]}),o.jsx(le,{value:[e],onValueChange:a=>t(a[0]),min:0,max:10,step:1,className:"mt-2"})]}),o.jsxs("div",{children:[o.jsx(F,{className:"text-sm font-medium",children:"Border Color"}),o.jsx(Ie,{type:"color",value:n,onChange:a=>r(a.target.value),className:"w-full h-10 mt-2"})]})]}),ot=[{name:"Arctic",color:"#E3F2FD"},{name:"Bog",color:"#4A5D23"},{name:"Desert",color:"#F4A460"},{name:"Forest",color:"#228B22"},{name:"Hills",color:"#8FBC8F"},{name:"Jungle",color:"#006400"},{name:"Mountains",color:"#696969"},{name:"Plains",color:"#9ACD32"},{name:"Road",color:"#708090"},{name:"Woodland",color:"#32CD32"}],bi=({selectedBiome:e,onBiomeSelect:n})=>o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(F,{className:"text-sm font-medium",children:"Biomes"}),o.jsx("div",{className:"text-xs",children:"Click a biome to activate its brush."})]}),o.jsxs("button",{className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-md border border-gray-300 transition-colors hover:bg-gray-50 ${e===null?"bg-blue-100 ring-2 ring-blue-300":"bg-white"}`,onClick:()=>n(null),children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),o.jsx("span",{className:"text-xs font-medium",children:"Cursor"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-1",children:ot.map(t=>o.jsxs("div",{className:`flex items-center gap-1 cursor-pointer px-2 py-1 rounded-md transition-colors hover:bg-gray-100 ${e===t.color?"bg-blue-100 ring-2 ring-blue-300":""}`,onClick:()=>n(e===t.color?null:t.color),children:[o.jsx("div",{className:"flex-shrink-0 w-4 h-4 border border-gray-300 rounded",style:{backgroundColor:t.color}}),o.jsx("span",{className:"overflow-hidden text-xs",children:t.name})]},t.name))})]});var rt=["Enter"," "],wi=["ArrowDown","PageUp","Home"],_o=["ArrowUp","PageDown","End"],yi=[...wi,..._o],Ci={ltr:[...rt,"ArrowRight"],rtl:[...rt,"ArrowLeft"]},ji={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Re="Menu",[be,Mi,Si]=it(Re),[oe,To]=ee(Re,[Si,ke,ue]),$e=ke(),Io=ue(),[Ni,re]=oe(Re),[Ri,_e]=oe(Re),Eo=e=>{const{__scopeMenu:n,open:t=!1,children:r,dir:a,onOpenChange:i,modal:c=!0}=e,l=$e(n),[p,d]=s.useState(null),f=s.useRef(!1),u=st(i),m=je(a);return s.useEffect(()=>{const x=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(Jt,{...l,children:o.jsx(Ni,{scope:n,open:t,onOpenChange:u,content:p,onContentChange:d,children:o.jsx(Ri,{scope:n,onClose:s.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:f,dir:m,modal:c,children:r})})})};Eo.displayName=Re;var _i="MenuAnchor",ht=s.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=$e(t);return o.jsx(Qt,{...a,...r,ref:n})});ht.displayName=_i;var xt="MenuPortal",[Ti,Po]=oe(xt,{forceMount:void 0}),ko=e=>{const{__scopeMenu:n,forceMount:t,children:r,container:a}=e,i=re(xt,n);return o.jsx(Ti,{scope:n,forceMount:t,children:o.jsx(te,{present:t||i.open,children:o.jsx($t,{asChild:!0,container:a,children:r})})})};ko.displayName=xt;var H="MenuContent",[Ii,gt]=oe(H),Do=s.forwardRef((e,n)=>{const t=Po(H,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,i=re(H,e.__scopeMenu),c=_e(H,e.__scopeMenu);return o.jsx(be.Provider,{scope:e.__scopeMenu,children:o.jsx(te,{present:r||i.open,children:o.jsx(be.Slot,{scope:e.__scopeMenu,children:c.modal?o.jsx(Ei,{...a,ref:n}):o.jsx(Pi,{...a,ref:n})})})})}),Ei=s.forwardRef((e,n)=>{const t=re(H,e.__scopeMenu),r=s.useRef(null),a=$(n,r);return s.useEffect(()=>{const i=r.current;if(i)return Br(i)},[]),o.jsx(vt,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:M(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Pi=s.forwardRef((e,n)=>{const t=re(H,e.__scopeMenu);return o.jsx(vt,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),ki=Dr("MenuContent.ScrollLock"),vt=s.forwardRef((e,n)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:l,onEntryFocus:p,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:x,disableOutsideScroll:g,...w}=e,h=re(H,t),y=_e(H,t),v=$e(t),b=Io(t),C=Mi(t),[j,k]=s.useState(null),P=s.useRef(null),E=$(n,P,h.onContentChange),L=s.useRef(0),_=s.useRef(""),I=s.useRef(0),A=s.useRef(null),D=s.useRef("right"),N=s.useRef(0),T=g?Ur:s.Fragment,G=g?{as:ki,allowPinchZoom:!0}:void 0,q=R=>{var ae,Mt;const K=_.current+R,Y=C().filter(W=>!W.disabled),Q=document.activeElement,Ke=(ae=Y.find(W=>W.ref.current===Q))==null?void 0:ae.textValue,Ue=Y.map(W=>W.textValue),jt=Ui(Ue,K,Ke),pe=(Mt=Y.find(W=>W.textValue===jt))==null?void 0:Mt.ref.current;(function W(St){_.current=St,window.clearTimeout(L.current),St!==""&&(L.current=window.setTimeout(()=>W(""),1e3))})(K),pe&&setTimeout(()=>pe.focus())};s.useEffect(()=>()=>window.clearTimeout(L.current),[]),Kr();const V=s.useCallback(R=>{var Y,Q;return D.current===((Y=A.current)==null?void 0:Y.side)&&qi(R,(Q=A.current)==null?void 0:Q.area)},[]);return o.jsx(Ii,{scope:t,searchRef:_,onItemEnter:s.useCallback(R=>{V(R)&&R.preventDefault()},[V]),onItemLeave:s.useCallback(R=>{var K;V(R)||((K=P.current)==null||K.focus(),k(null))},[V]),onTriggerLeave:s.useCallback(R=>{V(R)&&R.preventDefault()},[V]),pointerGraceTimerRef:I,onPointerGraceIntentChange:s.useCallback(R=>{A.current=R},[]),children:o.jsx(T,{...G,children:o.jsx(Hr,{asChild:!0,trapped:a,onMountAutoFocus:M(i,R=>{var K;R.preventDefault(),(K=P.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:o.jsx(zt,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:x,children:o.jsx(dt,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:M(p,R=>{y.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(en,{role:"menu","aria-orientation":"vertical","data-state":Wo(h.open),"data-radix-menu-content":"",dir:y.dir,...v,...w,ref:E,style:{outline:"none",...w.style},onKeyDown:M(w.onKeyDown,R=>{const Y=R.target.closest("[data-radix-menu-content]")===R.currentTarget,Q=R.ctrlKey||R.altKey||R.metaKey,Ke=R.key.length===1;Y&&(R.key==="Tab"&&R.preventDefault(),!Q&&Ke&&q(R.key));const Ue=P.current;if(R.target!==Ue||!yi.includes(R.key))return;R.preventDefault();const pe=C().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);_o.includes(R.key)&&pe.reverse(),Vi(pe)}),onBlur:M(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(L.current),_.current="")}),onPointerMove:M(e.onPointerMove,we(R=>{const K=R.target,Y=N.current!==R.clientX;if(R.currentTarget.contains(K)&&Y){const Q=R.clientX>N.current?"right":"left";D.current=Q,N.current=R.clientX}}))})})})})})})});Do.displayName=H;var Di="MenuGroup",bt=s.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(O.div,{role:"group",...r,ref:n})});bt.displayName=Di;var Ai="MenuLabel",Ao=s.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(O.div,{...r,ref:n})});Ao.displayName=Ai;var Ee="MenuItem",It="menu.itemSelect",ze=s.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:r,...a}=e,i=s.useRef(null),c=_e(Ee,e.__scopeMenu),l=gt(Ee,e.__scopeMenu),p=$(n,i),d=s.useRef(!1),f=()=>{const u=i.current;if(!t&&u){const m=new CustomEvent(It,{bubbles:!0,cancelable:!0});u.addEventListener(It,x=>r==null?void 0:r(x),{once:!0}),Vr(u,m),m.defaultPrevented?d.current=!1:c.onClose()}};return o.jsx(Oo,{...a,ref:p,disabled:t,onClick:M(e.onClick,f),onPointerDown:u=>{var m;(m=e.onPointerDown)==null||m.call(e,u),d.current=!0},onPointerUp:M(e.onPointerUp,u=>{var m;d.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:M(e.onKeyDown,u=>{const m=l.searchRef.current!=="";t||m&&u.key===" "||rt.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});ze.displayName=Ee;var Oo=s.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:r=!1,textValue:a,...i}=e,c=gt(Ee,t),l=Io(t),p=s.useRef(null),d=$(n,p),[f,u]=s.useState(!1),[m,x]=s.useState("");return s.useEffect(()=>{const g=p.current;g&&x((g.textContent??"").trim())},[i.children]),o.jsx(be.ItemSlot,{scope:t,disabled:r,textValue:a??m,children:o.jsx(ut,{asChild:!0,...l,focusable:!r,children:o.jsx(O.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:M(e.onPointerMove,we(g=>{r?c.onItemLeave(g):(c.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:M(e.onPointerLeave,we(g=>c.onItemLeave(g))),onFocus:M(e.onFocus,()=>u(!0)),onBlur:M(e.onBlur,()=>u(!1))})})})}),Oi="MenuCheckboxItem",Go=s.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:r,...a}=e;return o.jsx(Bo,{scope:e.__scopeMenu,checked:t,children:o.jsx(ze,{role:"menuitemcheckbox","aria-checked":Pe(t)?"mixed":t,...a,ref:n,"data-state":yt(t),onSelect:M(a.onSelect,()=>r==null?void 0:r(Pe(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Go.displayName=Oi;var Lo="MenuRadioGroup",[Gi,Li]=oe(Lo,{value:void 0,onValueChange:()=>{}}),Fo=s.forwardRef((e,n)=>{const{value:t,onValueChange:r,...a}=e,i=st(r);return o.jsx(Gi,{scope:e.__scopeMenu,value:t,onValueChange:i,children:o.jsx(bt,{...a,ref:n})})});Fo.displayName=Lo;var $o="MenuRadioItem",zo=s.forwardRef((e,n)=>{const{value:t,...r}=e,a=Li($o,e.__scopeMenu),i=t===a.value;return o.jsx(Bo,{scope:e.__scopeMenu,checked:i,children:o.jsx(ze,{role:"menuitemradio","aria-checked":i,...r,ref:n,"data-state":yt(i),onSelect:M(r.onSelect,()=>{var c;return(c=a.onValueChange)==null?void 0:c.call(a,t)},{checkForDefaultPrevented:!1})})})});zo.displayName=$o;var wt="MenuItemIndicator",[Bo,Fi]=oe(wt,{checked:!1}),Vo=s.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:r,...a}=e,i=Fi(wt,t);return o.jsx(te,{present:r||Pe(i.checked)||i.checked===!0,children:o.jsx(O.span,{...a,ref:n,"data-state":yt(i.checked)})})});Vo.displayName=wt;var $i="MenuSeparator",Ko=s.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e;return o.jsx(O.div,{role:"separator","aria-orientation":"horizontal",...r,ref:n})});Ko.displayName=$i;var zi="MenuArrow",Uo=s.forwardRef((e,n)=>{const{__scopeMenu:t,...r}=e,a=$e(t);return o.jsx(tn,{...a,...r,ref:n})});Uo.displayName=zi;var Bi="MenuSub",[ul,Ho]=oe(Bi),he="MenuSubTrigger",qo=s.forwardRef((e,n)=>{const t=re(he,e.__scopeMenu),r=_e(he,e.__scopeMenu),a=Ho(he,e.__scopeMenu),i=gt(he,e.__scopeMenu),c=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:p}=i,d={__scopeMenu:e.__scopeMenu},f=s.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return s.useEffect(()=>f,[f]),s.useEffect(()=>{const u=l.current;return()=>{window.clearTimeout(u),p(null)}},[l,p]),o.jsx(ht,{asChild:!0,...d,children:o.jsx(Oo,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":Wo(t.open),...e,ref:Ft(n,a.onTriggerChange),onClick:u=>{var m;(m=e.onClick)==null||m.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:M(e.onPointerMove,we(u=>{i.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!t.open&&!c.current&&(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:M(e.onPointerLeave,we(u=>{var x,g;f();const m=(x=t.content)==null?void 0:x.getBoundingClientRect();if(m){const w=(g=t.content)==null?void 0:g.dataset.side,h=w==="right",y=h?-5:5,v=m[h?"left":"right"],b=m[h?"right":"left"];i.onPointerGraceIntentChange({area:[{x:u.clientX+y,y:u.clientY},{x:v,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:v,y:m.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(u),u.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:M(e.onKeyDown,u=>{var x;const m=i.searchRef.current!=="";e.disabled||m&&u.key===" "||Ci[r.dir].includes(u.key)&&(t.onOpenChange(!0),(x=t.content)==null||x.focus(),u.preventDefault())})})})});qo.displayName=he;var Yo="MenuSubContent",Xo=s.forwardRef((e,n)=>{const t=Po(H,e.__scopeMenu),{forceMount:r=t.forceMount,...a}=e,i=re(H,e.__scopeMenu),c=_e(H,e.__scopeMenu),l=Ho(Yo,e.__scopeMenu),p=s.useRef(null),d=$(n,p);return o.jsx(be.Provider,{scope:e.__scopeMenu,children:o.jsx(te,{present:r||i.open,children:o.jsx(be.Slot,{scope:e.__scopeMenu,children:o.jsx(vt,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var u;c.isUsingKeyboardRef.current&&((u=p.current)==null||u.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:M(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:M(e.onEscapeKeyDown,f=>{c.onClose(),f.preventDefault()}),onKeyDown:M(e.onKeyDown,f=>{var x;const u=f.currentTarget.contains(f.target),m=ji[c.dir].includes(f.key);u&&m&&(i.onOpenChange(!1),(x=l.trigger)==null||x.focus(),f.preventDefault())})})})})})});Xo.displayName=Yo;function Wo(e){return e?"open":"closed"}function Pe(e){return e==="indeterminate"}function yt(e){return Pe(e)?"indeterminate":e?"checked":"unchecked"}function Vi(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function Ki(e,n){return e.map((t,r)=>e[(n+r)%e.length])}function Ui(e,n,t){const a=n.length>1&&Array.from(n).every(d=>d===n[0])?n[0]:n,i=t?e.indexOf(t):-1;let c=Ki(e,Math.max(i,0));a.length===1&&(c=c.filter(d=>d!==t));const p=c.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return p!==t?p:void 0}function Hi(e,n){const{x:t,y:r}=e;let a=!1;for(let i=0,c=n.length-1;i<n.length;c=i++){const l=n[i],p=n[c],d=l.x,f=l.y,u=p.x,m=p.y;f>r!=m>r&&t<(u-d)*(r-f)/(m-f)+d&&(a=!a)}return a}function qi(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return Hi(t,n)}function we(e){return n=>n.pointerType==="mouse"?e(n):void 0}var Yi=Eo,Xi=ht,Wi=ko,Zi=Do,Ji=bt,Qi=Ao,ec=ze,tc=Go,nc=Fo,oc=zo,rc=Vo,ac=Ko,sc=Uo,ic=qo,cc=Xo,Be="DropdownMenu",[lc,fl]=ee(Be,[To]),B=To(),[dc,Zo]=lc(Be),Jo=e=>{const{__scopeDropdownMenu:n,children:t,dir:r,open:a,defaultOpen:i,onOpenChange:c,modal:l=!0}=e,p=B(n),d=s.useRef(null),[f,u]=de({prop:a,defaultProp:i??!1,onChange:c,caller:Be});return o.jsx(dc,{scope:n,triggerId:ge(),triggerRef:d,contentId:ge(),open:f,onOpenChange:u,onOpenToggle:s.useCallback(()=>u(m=>!m),[u]),modal:l,children:o.jsx(Yi,{...p,open:f,onOpenChange:u,dir:r,modal:l,children:t})})};Jo.displayName=Be;var Qo="DropdownMenuTrigger",er=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...a}=e,i=Zo(Qo,t),c=B(t);return o.jsx(Xi,{asChild:!0,...c,children:o.jsx(O.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Ft(n,i.triggerRef),onPointerDown:M(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:M(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});er.displayName=Qo;var uc="DropdownMenuPortal",tr=e=>{const{__scopeDropdownMenu:n,...t}=e,r=B(n);return o.jsx(Wi,{...r,...t})};tr.displayName=uc;var nr="DropdownMenuContent",or=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=Zo(nr,t),i=B(t),c=s.useRef(!1);return o.jsx(Zi,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:n,onCloseAutoFocus:M(e.onCloseAutoFocus,l=>{var p;c.current||(p=a.triggerRef.current)==null||p.focus(),c.current=!1,l.preventDefault()}),onInteractOutside:M(e.onInteractOutside,l=>{const p=l.detail.originalEvent,d=p.button===0&&p.ctrlKey===!0,f=p.button===2||d;(!a.modal||f)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});or.displayName=nr;var fc="DropdownMenuGroup",pc=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(Ji,{...a,...r,ref:n})});pc.displayName=fc;var mc="DropdownMenuLabel",rr=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(Qi,{...a,...r,ref:n})});rr.displayName=mc;var hc="DropdownMenuItem",ar=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(ec,{...a,...r,ref:n})});ar.displayName=hc;var xc="DropdownMenuCheckboxItem",sr=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(tc,{...a,...r,ref:n})});sr.displayName=xc;var gc="DropdownMenuRadioGroup",vc=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(nc,{...a,...r,ref:n})});vc.displayName=gc;var bc="DropdownMenuRadioItem",ir=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(oc,{...a,...r,ref:n})});ir.displayName=bc;var wc="DropdownMenuItemIndicator",cr=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(rc,{...a,...r,ref:n})});cr.displayName=wc;var yc="DropdownMenuSeparator",lr=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(ac,{...a,...r,ref:n})});lr.displayName=yc;var Cc="DropdownMenuArrow",jc=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(sc,{...a,...r,ref:n})});jc.displayName=Cc;var Mc="DropdownMenuSubTrigger",dr=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(ic,{...a,...r,ref:n})});dr.displayName=Mc;var Sc="DropdownMenuSubContent",ur=s.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...r}=e,a=B(t);return o.jsx(cc,{...a,...r,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ur.displayName=Sc;var Nc=Jo,Rc=er,_c=tr,fr=or,pr=rr,mr=ar,hr=sr,xr=ir,gr=cr,vr=lr,br=dr,wr=ur;const Et=Nc,Pt=Rc,Tc=s.forwardRef(({className:e,inset:n,children:t,...r},a)=>o.jsxs(br,{ref:a,className:S("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",e),...r,children:[t,o.jsx(an,{className:"ml-auto"})]}));Tc.displayName=br.displayName;const Ic=s.forwardRef(({className:e,...n},t)=>o.jsx(wr,{ref:t,className:S("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n}));Ic.displayName=wr.displayName;const at=s.forwardRef(({className:e,sideOffset:n=4,...t},r)=>o.jsx(_c,{children:o.jsx(fr,{ref:r,sideOffset:n,className:S("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t})}));at.displayName=fr.displayName;const ne=s.forwardRef(({className:e,inset:n,...t},r)=>o.jsx(mr,{ref:r,className:S("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",e),...t}));ne.displayName=mr.displayName;const Ec=s.forwardRef(({className:e,children:n,checked:t,...r},a)=>o.jsxs(hr,{ref:a,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(gr,{children:o.jsx(Xr,{className:"h-4 w-4"})})}),n]}));Ec.displayName=hr.displayName;const Pc=s.forwardRef(({className:e,children:n,...t},r)=>o.jsxs(xr,{ref:r,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(gr,{children:o.jsx(sn,{className:"h-2 w-2 fill-current"})})}),n]}));Pc.displayName=xr.displayName;const kc=s.forwardRef(({className:e,inset:n,...t},r)=>o.jsx(pr,{ref:r,className:S("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...t}));kc.displayName=pr.displayName;const Dc=s.forwardRef(({className:e,...n},t)=>o.jsx(vr,{ref:t,className:S("-mx-1 my-1 h-px bg-muted",e),...n}));Dc.displayName=vr.displayName;const Ac=({selectedTool:e,onToolSelect:n,onZoomIn:t,onZoomOut:r,onResetView:a,onResetCanvas:i,onExportImage:c,onExportData:l,zoomLevel:p})=>{const[d,f]=Ar.useState(!1),u=[{id:"select",icon:fa,label:"Select Tool"}];return o.jsx(Oe,{delayDuration:300,children:o.jsxs("div",{className:"fixed z-50 bottom-4 right-4",children:[o.jsx("div",{className:"p-2 bg-white border border-gray-200 rounded-lg shadow-lg",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("div",{className:"py-1 text-xs font-medium text-center text-gray-500",children:"Tools"}),u.map(m=>{const x=m.icon;return o.jsxs(Z,{children:[o.jsx(J,{asChild:!0,children:o.jsxs(U,{variant:e===m.id?"default":"ghost",size:"icon",onClick:()=>n(m.id),children:[o.jsx(x,{className:"w-4 h-4"}),o.jsx("span",{className:"sr-only",children:m.label})]})}),o.jsx(X,{side:"left",children:m.label})]},m.id)}),o.jsx(xe,{className:"my-2"}),o.jsx("div",{className:"py-1 text-xs font-medium text-center text-gray-500",children:"Actions"}),[{icon:wa,onClick:t,label:"Zoom In"},{icon:Ca,onClick:r,label:"Zoom Out"},{icon:ma,onClick:a,label:"Reset View"},{icon:va,onClick:i,label:"Reset Canvas"}].map(m=>{const x=m.icon;return o.jsxs(Z,{children:[o.jsx(J,{asChild:!0,children:o.jsxs(U,{variant:"ghost",size:"icon",onClick:m.onClick,children:[o.jsx(x,{className:"w-4 h-4"}),o.jsx("span",{className:"sr-only",children:m.label})]})}),o.jsx(X,{side:"left",children:m.label})]},m.label)}),o.jsx(xe,{className:"my-2"}),o.jsx("div",{className:"py-1 text-xs font-medium text-center text-gray-500",children:"Export"}),o.jsxs(Et,{children:[o.jsx(Pt,{asChild:!0,children:o.jsxs(U,{variant:"ghost",size:"icon",children:[o.jsx(ca,{className:"w-4 h-4"}),o.jsx("span",{className:"sr-only",children:"Export Image"})]})}),o.jsxs(at,{side:"top",children:[o.jsx(ne,{onClick:()=>c("webp"),children:"WebP"}),o.jsx(ne,{onClick:()=>c("png"),children:"PNG"}),o.jsx(ne,{onClick:()=>c("jpeg"),children:"JPG"})]})]}),o.jsxs(Et,{children:[o.jsx(Pt,{asChild:!0,children:o.jsxs(U,{variant:"ghost",size:"icon",children:[o.jsx(ra,{className:"w-4 h-4"}),o.jsx("span",{className:"sr-only",children:"Export Data"})]})}),o.jsxs(at,{side:"top",children:[o.jsx(ne,{onClick:()=>l("json"),children:"JSON"}),o.jsx(ne,{onClick:()=>l("uvtt"),children:"UVTT"}),o.jsx(ne,{onClick:()=>{l("foundry"),f(!0)},children:"FoundryVTT"})]})]}),o.jsx(xe,{className:"my-2"}),o.jsxs(Z,{children:[o.jsx(J,{asChild:!0,children:o.jsxs(U,{variant:"ghost",size:"icon",children:[o.jsx(Xe,{className:"w-4 h-4"}),o.jsx("span",{className:"sr-only",children:"Help"})]})}),o.jsx(X,{side:"left",className:"max-w-xs",children:o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsx("div",{className:"mb-2 font-semibold",children:"Canvas Controls:"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Left Click:"})," ","Paint/Select"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Right Click:"})," Erase tile"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Middle Click + Drag:"})," ","Pan view"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Mouse Wheel:"})," Zoom in/out"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Current Zoom:"})," ",Math.round(p*100),"%"]})]})]})})]})]})}),o.jsx(Ht,{open:d,onOpenChange:f,children:o.jsxs(qt,{children:[o.jsxs(Yt,{children:[o.jsx(Xt,{children:"Import into FoundryVTT"}),o.jsx(Wt,{children:"Follow these steps to import the map you just downloaded into FoundryVTT."})]}),o.jsx("div",{className:"space-y-2 text-sm",children:o.jsxs("ol",{className:"list-decimal list-inside",children:[o.jsx("li",{children:"Create a new scene."}),o.jsxs("li",{children:["Right click that scene and click"," ",o.jsx("b",{children:"Import Data"}),"."]}),o.jsxs("li",{children:["Choose the ",o.jsx("i",{children:"_foundry.json"})," file and then click the ",o.jsx("b",{children:"Import"})," button."]}),o.jsxs("li",{children:["Right click the same scene and click"," ",o.jsx("b",{children:"Configure"}),"."]}),o.jsxs("li",{children:["On the ",o.jsx("i",{children:"Basic"})," tab, upload a"," ",o.jsx("i",{children:"Background Image"})," by choosing the WEBP file that was downloaded."]}),o.jsx("li",{children:"All done! 🎉"})]})}),o.jsx(Zt,{children:o.jsx(qr,{asChild:!0,children:o.jsx(U,{children:"Close"})})})]})})]})})},Oc=1e5,yr=(e,n,t,r,a)=>{const i=r/2;let c=0,l=0;const p=2*i,d=Math.sqrt(3)*i,u=Math.pow(i,2)-Math.pow(d/2,2),m=Math.sqrt(u);switch(e){case"square":c=n*(r+a)+a,l=t*(r+a)+a;break;case"hex-flat-odd":case"hex-flat-even":{c=a*2+(p-m)*n-m+p/2,l=a*2+d*t+d/2;break}case"hex-pointy-odd":case"hex-pointy-even":{c=a*2+d*n+d/2,l=a*2+(p-m)*t-m+p/2;break}}const x=Math.min(1,Oc/Math.max(c,l));return{rawWidth:c,rawHeight:l,scale:x,canvasWidth:Math.round(c*x),canvasHeight:Math.round(l*x)}},Gc=(e,n,t,r,a,i,c,l,p,d)=>{const f=(e-p.x)/d,u=(n-p.y)/d,m=f/l-c,x=u/l-c;if(t==="square"){const g=Math.floor(m/i),w=Math.floor(x/i);if(g>=0&&g<r&&w>=0&&w<a)return{col:g,row:w}}else{const g=t.startsWith("hex-flat"),w=t.endsWith("odd"),h=i/2,y=g?2*h:Math.sqrt(3)*h,v=g?Math.sqrt(3)*h:2*h,b=g?3/2*h:y,C=g?v:3/2*h,j=g?h:y/2,k=g?v/2:h;if(g){const P=Math.round((m-j)/b);let E=Math.round((x-k)/C);const L=P%2===(w?1:0)?v/2:0;if(E=Math.round((x-k-L)/C),P>=0&&P<r&&E>=0&&E<a)return{col:P,row:E}}else{let P=Math.round((m-j)/b);const E=Math.round((x-k)/C),L=E%2===(w?1:0)?y/2:0;if(P=Math.round((m-j-L)/b),P>=0&&P<r&&E>=0&&E<a)return{col:P,row:E}}}return null};function Cr(e,n,t,r,a,i,c){var l;if(i>0){const{width:p,height:d}=jr(n,t,r,i);e.fillStyle=c,e.fillRect(0,0,p,d)}for(let p=0;p<t;p++)for(let d=0;d<n;d++){const f=(l=a[p])==null?void 0:l[d];if(f){const u=d*(r+i)+i,m=p*(r+i)+i;e.fillStyle=f,e.fillRect(u,m,r,r)}}}function jr(e,n,t,r){const a=e*(t+r)+r,i=n*(t+r)+r;return{width:Math.ceil(a),height:Math.ceil(i)}}function Lc(e){const n=e,t=n/2,r=t,a=r*Math.sqrt(3)/2,i=r*Math.sqrt(3),c=Math.sqrt(r*r-i/2*(i/2));return{r:a,s:i,d:n,a:r,R:t,t:c}}const kt=new Map,Ye=new Map;function Fc(e,n){const t=`${e}_${n}`;let r=kt.get(t);if(!r){r=[];for(let a=0;a<6;a++){const i=Math.PI/3*a+(n?0:Math.PI/6);r.push({x:e*Math.cos(i),y:e*Math.sin(i)})}kt.set(t,r)}return r}function $c(e,n){const t=Fc(e,n),r=new Path2D;return t.forEach((a,i)=>{i===0?r.moveTo(a.x,a.y):r.lineTo(a.x,a.y)}),r.closePath(),r}function zc(e,n){const t=`${e}_${n}`;return Ye.has(t)||Ye.set(t,$c(e,n)),Ye.get(t)}function Bc(e,n,t,r,a,i){const c=zc(r,a);e.save(),e.translate(n,t),e.fillStyle=i,e.fill(c),e.restore()}function Mr(e,n,t,r,a,i,c){var C;const{r:l,R:p}=Lc(t);let d,f,u,m;r?(d=3*p/2+a,f=2*l+a,u=0,m=l+a/2):(d=2*l+a,f=3*p/2+a,u=l+a/2,m=0);const x=[];for(let j=0;j<n;j++)for(let k=0;k<e;k++){if(c&&!((C=c[j])!=null&&C[k]))continue;let P=k*d,E=j*f;r?k%2===(i?1:0)&&(E+=m):j%2===(i?1:0)&&(P+=u),x.push({x:P,y:E,row:j,col:k})}const g=Math.min(...x.map(j=>j.x)),w=Math.max(...x.map(j=>j.x)),h=Math.min(...x.map(j=>j.y)),y=Math.max(...x.map(j=>j.y));return{positions:x,bounds:{minX:g,maxX:w,minY:h,maxY:y},spacing:{horizontalSpacing:d,verticalSpacing:f},hexRadius:p,widthRadius:r?p:l,heightRadius:r?l:p}}function Sr(e,n,t,r,a,i,c,l){var v;const p=n.startsWith("hex-flat"),d=n.endsWith("odd"),f=Mr(t,r,a,p,c,d,i),{positions:u,bounds:m,hexRadius:x,widthRadius:g,heightRadius:w}=f,h=c+g-m.minX,y=c+w-m.minY;if(c>0){const b=Math.ceil(m.maxX-m.minX+2*g+2*c),C=Math.ceil(m.maxY-m.minY+2*w+2*c);e.fillStyle=l,e.fillRect(0,0,b,C)}for(const b of u){const C=(v=i[b.row])==null?void 0:v[b.col];if(!C)continue;const j=h+b.x,k=y+b.y;Bc(e,j,k,x,p,C)}}function Vc(e,n,t,r,a,i=!1){const c=Mr(e,n,t,r,a,i),{bounds:l,widthRadius:p,heightRadius:d}=c,f=Math.ceil(l.maxX-l.minX+2*p+2*a),u=Math.ceil(l.maxY-l.minY+2*d+2*a);return{width:f,height:u}}const Kc=({gridType:e,cols:n,rows:t,tileSize:r,borderWidth:a,borderColor:i,biomeGrid:c,panOffset:l,zoomLevel:p,onMouseDown:d,onMouseMove:f,onMouseUp:u,onMouseLeave:m,onWheel:x,onContextMenu:g,cursorStyle:w})=>{const h=s.useRef(null),y=s.useCallback(()=>{const v=h.current;if(!v)return;const b=v.getContext("2d");if(!b)return;const{scale:C}=yr(e,n,t,r,a);v.width=v.clientWidth,v.height=v.clientHeight,b.clearRect(0,0,v.width,v.height),b.save(),b.translate(l.x,l.y),b.scale(p,p),C<1&&b.scale(C,C),e==="square"?Cr(b,n,t,r,c,a,i):Sr(b,e,n,t,r,c,a,i),b.restore()},[e,n,t,r,a,i,c,l,p]);return s.useEffect(()=>{y()},[y]),o.jsx("canvas",{ref:h,className:"w-full h-full",style:w,onMouseDown:d,onMouseMove:f,onMouseUp:u,onMouseLeave:m,onWheel:x,onContextMenu:g})},Uc=({initialGridType:e="square"}={})=>{const[n,t]=s.useState(e),[r,a]=s.useState(20),[i,c]=s.useState(20),[l,p]=s.useState(30),[d,f]=s.useState(80),[u,m]=s.useState(1),[x,g]=s.useState("#000000"),[w,h]=s.useState([]),[y,v]=s.useState(!1),[b,C]=s.useState(!0);s.useEffect(()=>{if(b){const N=Te(n),T=Qe(N);a(T.cols),c(T.rows),p(T.tileSize),f(T.ppi),m(T.borderWidth),g(T.borderColor),C(!1)}},[b,n]),s.useEffect(()=>{if(!b&&!y){const N=Te(n),T=Qe(N);a(T.cols),c(T.rows),p(T.tileSize),f(T.ppi),m(T.borderWidth),g(T.borderColor)}},[n,y,b]),s.useEffect(()=>{if(!b){const N=Te(n);Xn(N,{cols:r,rows:i,tileSize:l,ppi:d,borderWidth:u,borderColor:x})}},[n,r,i,l,d,u,x,b]);const j=s.useCallback(()=>{const N=[];for(let T=0;T<i;T++){N[T]=[];for(let G=0;G<r;G++){const q=ot[Math.floor(Math.random()*ot.length)].color;N[T][G]=q}}h(N)},[r,i]),k=s.useCallback(()=>{h(Array(i).fill(null).map(()=>Array(r).fill(null)))},[i,r]);return{gridType:n,cols:r,rows:i,tileSize:l,ppi:d,borderWidth:u,borderColor:x,biomeGrid:w,setGridType:t,setBiomeGrid:h,generateBiomeGrid:j,resetCanvas:k,handlePresetSelect:N=>{v(!1),f(N.ppi),p(N.tileSize),a(N.cols),c(N.rows)},updateCols:N=>{v(!0),a(N)},updateRows:N=>{v(!0),c(N)},updateTileSize:N=>{v(!0),p(N)},updatePpi:N=>{v(!0),f(N)},updateBorderWidth:N=>{v(!0),m(N)},updateBorderColor:N=>{v(!0),g(N)}}},Dt=.05,At=5,Hc=()=>{const[e,n]=s.useState({x:0,y:0}),[t,r]=s.useState(1),a=s.useCallback(()=>{const d=Math.min(At,t*1.2);r(d)},[t]),i=s.useCallback(()=>{const d=Math.max(Dt,t*.8);r(d)},[t]),c=s.useCallback(()=>{n({x:0,y:0}),r(1)},[]),l=s.useCallback((d,f,u)=>{const m=Math.max(Dt,Math.min(At,d));if(m!==t){const x=m/t;n(g=>({x:f-(f-g.x)*x,y:u-(u-g.y)*x})),r(m)}},[t]),p=s.useCallback((d,f)=>{n(u=>({x:u.x+d,y:u.y+f}))},[]);return{panOffset:e,zoomLevel:t,zoomIn:a,zoomOut:i,resetView:c,updateZoom:l,updatePan:p,setPanOffset:n}},qc=({gridType:e,cols:n,rows:t,tileSize:r,borderWidth:a,panOffset:i,zoomLevel:c,selectedBiome:l,selectedTool:p,setBiomeGrid:d,updatePan:f,updateZoom:u})=>{const[m,x]=s.useState(!1),[g,w]=s.useState(!1),[h,y]=s.useState({x:0,y:0}),v=s.useCallback((_,I)=>{if(!l)return;const{scale:A}=yr(e,n,t,r,a),D=Gc(_,I,e,n,t,r,a,A,i,c);D&&d(N=>{const T=[...N];return T[D.row]||(T[D.row]=[]),T[D.row][D.col]=l,T})},[l,e,n,t,r,a,i,c,d]),b=s.useCallback(_=>{const I=_.currentTarget.getBoundingClientRect(),A=_.clientX-I.left,D=_.clientY-I.top;_.button===0?l&&(x(!0),v(A,D)):_.button===2&&(_.preventDefault(),w(!0),y({x:A,y:D}))},[l,v]),C=s.useCallback(_=>{const I=_.currentTarget.getBoundingClientRect(),A=_.clientX-I.left,D=_.clientY-I.top;if(m&&l&&_.buttons===1)v(A,D);else if(g&&_.buttons===2){const N=A-h.x,T=D-h.y;f(N,T),y({x:A,y:D})}},[m,g,l,h,v,f]),j=s.useCallback(_=>{_.button===0?x(!1):_.button===2&&w(!1)},[]),k=s.useCallback(()=>{x(!1),w(!1)},[]),P=s.useCallback(_=>{_.preventDefault();const I=_.currentTarget.getBoundingClientRect(),A=_.clientX-I.left,D=_.clientY-I.top,N=_.deltaY>0?.9:1.1,T=c*N;u(T,A,D)},[c,u]),E=s.useCallback(_=>{_.preventDefault()},[]),L=s.useCallback(()=>g?{cursor:"grabbing"}:l?{cursor:`url("data:image/svg+xml,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='8' fill='${encodeURIComponent(l)}' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E") 10 10, crosshair`}:{cursor:"not-allowed"},[g,l]);return{handleMouseDown:b,handleMouseMove:C,handleMouseUp:j,handleMouseLeave:k,handleWheel:P,handleContextMenu:E,getCursorStyle:L}};function Nr(e){if(e.gridType==="square")return jr(e.cols,e.rows,e.tileSize,e.borderWidth);{const n=e.gridType.startsWith("hex-flat");return Vc(e.cols,e.rows,e.tileSize,n,e.borderWidth)}}function Rr(e){const{width:n,height:t}=Nr(e),r=new OffscreenCanvas(n,t),a=r.getContext("2d");if(!a)throw new Error("Failed to get offscreen canvas context");return e.borderWidth>0?(a.fillStyle=e.borderColor,a.fillRect(0,0,n,t)):(a.fillStyle="#ffffff",a.fillRect(0,0,n,t)),e.gridType==="square"?Cr(a,e.cols,e.rows,e.tileSize,e.biomeGrid,e.borderWidth,e.borderColor):Sr(a,e.gridType,e.cols,e.rows,e.tileSize,e.biomeGrid,e.borderWidth,e.borderColor),r}function Yc(){return new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}function ye(e,n=""){const t=Yc();return`grid_${`${e.gridType}_${e.cols}x${e.rows}`}_${t}${n}`}function Xc(e,n){const t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}function Ct(e,n){const t=document.createElement("a");t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Wc(e){return e.some(n=>n.some(t=>t!==null))}function Ve(e){if(!Wc(e.biomeGrid))throw new Error("Grid is empty. Please generate a map first.")}async function Zc(e,n="webp"){const t=`image/${n}`,r=await e.convertToBlob({type:t,quality:.95});return new Promise((a,i)=>{const c=new FileReader;c.onloadend=()=>{const p=c.result.split(",")[1];a(p)},c.onerror=i,c.readAsDataURL(r)})}function Jc(e){return{square:1,"hex-pointy-even":2,"hex-pointy-odd":3,"hex-flat-even":4,"hex-flat-odd":5}[e]??1}async function _r(e,n){Ve(n);try{const t=Rr(n),r=`image/${e==="jpeg"?"jpeg":e}`,a=e==="jpeg"?.9:e==="webp"?.95:void 0,i=await t.convertToBlob({type:r,quality:a}),c=`${ye(n)}.${e}`;Xc(i,c)}catch(t){throw console.error("Failed to export image:",t),t}}function Qc(e){Ve(e);const n={version:"1.0",timestamp:new Date().toISOString(),gridType:e.gridType,dimensions:{cols:e.cols,rows:e.rows},tileSize:e.tileSize,ppi:e.ppi,border:{width:e.borderWidth,color:e.borderColor},biomeGrid:e.biomeGrid},t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n,null,2)),r=`${ye(e)}.json`;Ct(t,r)}async function el(e){if(Ve(e),e.gridType.includes("hex"))return alert("Sorry, but UVTT does not support hex grids. It only supports square grids.");try{const n=Rr(e),t=await Zc(n,"webp"),r={software:"Generator",creator:"Michael Fitzgerald",format:1,resolution:{map_origin:{x:0,y:0},map_size:{x:e.cols,y:e.rows},pixels_per_grid:e.tileSize},line_of_sight:[],objects_line_of_sight:[],portals:[],environment:{baked_lighting:!1,ambient_light:null},lights:[],image:t},a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r,null,2)),i=`${ye(e)}.uvtt`;Ct(a,i)}catch(n){throw console.error("Failed to export as UVTT:",n),n}}async function tl(e){if(Ve(e),e.ppi<50)throw new Error("FoundryVTT does not support a grid size less than 50!");try{const{width:n,height:t}=Nr(e),r=ye(e,"_scene"),a={name:r,navigation:!0,navOrder:0,navName:"",img:`worlds/your-world/${r}.webp`,foreground:null,thumb:null,width:n,height:t,padding:0,initial:null,backgroundColor:"#999999",gridType:Jc(e.gridType),grid:e.tileSize,shiftX:0,shiftY:0,gridColor:e.borderColor,gridAlpha:.2,gridDistance:5,gridUnits:"ft",tokenVision:!0,fogExploration:!0,fogReset:Date.now(),globalLight:!1,globalLightThreshold:null,darkness:0,drawings:[],tokens:[],lights:[],notes:[],sounds:[],templates:[],tiles:[],walls:[],playlist:null,playlistSound:null,journal:null,weather:"",flags:{}},i="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a,null,2)),c=`${ye(e,"_foundry")}.json`;Ct(i,c)}catch(n){throw console.error("Failed to export as FoundryVTT:",n),n}}async function nl(e,n){try{switch(e){case"json":Qc(n);break;case"uvtt":await el(n);break;case"foundry":{const t=Math.max(n.tileSize,50),r={...n,tileSize:t,borderWidth:0};await tl(r),await _r("webp",r);break}default:throw new Error(`Unsupported export type: ${e}`)}}catch(t){throw console.error(`Failed to export as ${e}:`,t),t}}const Tr=20,Ir=200,Er=10,Pr=300,Ot=100,Gt=5e4,ol=()=>{const[e,n]=s.useState(null),[t,r]=s.useState("paint"),{open:a,setOpen:i}=Se(),{maxGridWidth:c,maxGridHeight:l,hasWebGL:p}=s.useMemo(()=>{const g=Or();return{maxGridWidth:g?Gt:Ot,maxGridHeight:g?Gt:Ot,hasWebGL:g}},[]),d=Uc(),f=Hc(),u=qc({gridType:d.gridType,cols:d.cols,rows:d.rows,tileSize:d.tileSize,borderWidth:d.borderWidth,panOffset:f.panOffset,zoomLevel:f.zoomLevel,selectedBiome:e,selectedTool:t,setBiomeGrid:d.setBiomeGrid,updatePan:f.updatePan,updateZoom:f.updateZoom});s.useEffect(()=>{d.generateBiomeGrid()},[d.generateBiomeGrid]);const m=s.useCallback(async g=>{try{if(!document.querySelector("canvas"))throw new Error("Canvas not found");await _r(g,d)}catch(w){console.error("Export failed:",w)}},[d]),x=s.useCallback(async g=>{try{if(!document.querySelector("canvas"))throw new Error("Canvas not found");await nl(g,d)}catch(w){console.error("Export failed:",w)}},[d]);return o.jsx(Oe,{children:o.jsxs("div",{className:"relative flex w-full overflow-y-hidden",children:[o.jsxs("div",{className:"relative",children:[o.jsxs(Nn,{className:`mt-16 transition-transform duration-300 ease-in-out ${a?"translate-x-0":"-translate-x-full"}`,children:[o.jsxs(Rn,{className:"flex flex-row items-center justify-between gap-2 px-3 border-b",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Grid Controls"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(U,{size:"icon",variant:"outline",onClick:d.generateBiomeGrid,children:o.jsx(na,{})}),o.jsx(Ks,{currentGridType:d.gridType,onPresetSelect:d.handlePresetSelect})]})]}),o.jsxs(_n,{className:"p-4 space-y-3 overflow-y-auto",children:[o.jsx(Zs,{gridType:d.gridType,onGridTypeChange:d.setGridType}),o.jsx(xi,{cols:d.cols,rows:d.rows,onColsChange:d.updateCols,onRowsChange:d.updateRows,maxCols:c,maxRows:l,hasWebGL:p}),o.jsx(gi,{tileSize:d.tileSize,ppi:d.ppi,onTileSizeChange:d.updateTileSize,onPpiChange:d.updatePpi,minTileSize:Tr,maxTileSize:Ir,minPpi:Er,maxPpi:Pr}),o.jsx(vi,{borderWidth:d.borderWidth,borderColor:d.borderColor,onBorderWidthChange:d.updateBorderWidth,onBorderColorChange:d.updateBorderColor}),o.jsx(bi,{selectedBiome:e,onBiomeSelect:n})]})]}),o.jsx(U,{onClick:()=>i(!a),className:`fixed top-1/2 transform -translate-y-1/2 w-8 h-16 p-0 rounded-r-md rounded-l-none bg-white border hover:bg-gray-50 z-50 transition-all duration-300 ease-in-out ${a?"left-64":"left-0"}`,style:{marginTop:"4rem"},children:a?o.jsx(Zr,{className:"w-4 h-4 text-gray-600"}):o.jsx(an,{className:"w-4 h-4 text-gray-600"})})]}),o.jsx("div",{className:"flex flex-col flex-1 overflow-hidden transition-all duration-300 ease-in-out",children:o.jsx("div",{className:"flex items-center justify-center flex-1 overflow-hidden bg-gray-200",children:o.jsx(Kc,{gridType:d.gridType,cols:d.cols,rows:d.rows,tileSize:d.tileSize,borderWidth:d.borderWidth,borderColor:d.borderColor,biomeGrid:d.biomeGrid,panOffset:f.panOffset,zoomLevel:f.zoomLevel,onMouseDown:u.handleMouseDown,onMouseMove:u.handleMouseMove,onMouseUp:u.handleMouseUp,onMouseLeave:u.handleMouseLeave,onWheel:u.handleWheel,onContextMenu:u.handleContextMenu,cursorStyle:u.getCursorStyle()})})}),o.jsx(Ac,{selectedTool:t,onToolSelect:r,onZoomIn:f.zoomIn,onZoomOut:f.zoomOut,onResetView:f.resetView,onResetCanvas:d.resetCanvas,onExportImage:m,onExportData:x,zoomLevel:f.zoomLevel})]})})},pl=()=>o.jsx(Sn,{defaultOpen:!0,children:o.jsx(ol,{})});export{Pr as MAX_PPI,Ot as MAX_TILES_NO_WEBGL,Gt as MAX_TILES_WEBGL,Ir as MAX_TILE_SIZE,Er as MIN_PPI,Tr as MIN_TILE_SIZE,pl as default};
